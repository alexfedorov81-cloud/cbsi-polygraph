<!-- Модальное окно обратной связи -->
<div id="callback-modal" class="modal hidden">
    <div class="modal-overlay" onclick="closeModal(event)"></div>

    <div class="modal-container">
        <div class="modal-content">
            <!-- Заголовок -->
            <div class="modal-header">
                <h3 class="text-2xl font-bold text-light" id="modal-title">Заявка на обратный звонок</h3>
                <button onclick="closeModal(event)" class="modal-close-btn" aria-label="Закрыть окно">
                    &times;
                </button>
            </div>

            <!-- Форма -->
            <form id="callback-form-modal" method="POST" action="{% url 'callback_request' %}" class="p-6 space-y-4">
                {% csrf_token %}
                <input type="hidden" name="service_id" id="modal-service-id">

                <div>
                    <label for="modal-name" class="block text-light mb-2">Имя *</label>
                    <input type="text"
                           name="name"
                           required
                           class="modal-form-input"
                           placeholder="Ваше имя"
                           id="modal-name"
                           autocomplete="name">
                </div>

                <div>
                    <label for="modal-phone" class="block text-light mb-2">Телефон *</label>
                    <input type="tel"
                           name="phone"
                           required
                           class="modal-form-input"
                           placeholder="+7 (___) ___-__-__"
                           id="modal-phone"
                           autocomplete="tel">
                </div>

                <div>
                    <label for="modal-message" class="block text-light mb-2">Дополнительно</label>
                    <textarea name="message"
                              class="modal-form-textarea"
                              placeholder="Дополнительная информация..."
                              id="modal-message"
                              rows="3"></textarea>
                </div>

                <div class="pt-2">
                    <label for="modal-consent" class="flex items-start space-x-3 cursor-pointer">
                        <input type="checkbox"
                               name="consent"
                               required
                               class="modal-checkbox mt-1"
                               id="modal-consent">
                        <span class="text-sm text-light-secondary">
                            Я выражаю согласие на передачу и обработку персональных данных в соответствии с
                            <a href="{% url 'privacy_policy' %}" target="_blank" class="text-accent hover:underline">Политикой конфиденциальности</a>
                        </span>
                    </label>
                </div>

                <div class="pt-4">
                    <button type="submit"
                            class="w-full btn btn-primary py-3 text-lg font-semibold"
                            id="modal-submit">
                        Отправить заявку
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Стили для фиксации позиции  -->
<style>
/* Экстренные фиксы для модального окна */
#callback-modal {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    z-index: 99999 !important;
}

/* Предотвращение скролла контента под модалкой */
body.modal-open {
    overflow: hidden !important;
    position: fixed !important;
    width: 100% !important;
}
</style>